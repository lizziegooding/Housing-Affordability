<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>PHC Housing Affordability</title>

	<!-- mapbox library -->
	<script src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js'></script>
	<link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' />

	<!-- jquery library -->
	<script src="//code.jquery.com/jquery-1.10.2.js"></script>

	<!-- nouislider library -->
	<script type='text/javascript' src="js/nouislider.js"></script>
	<link href='css/nouislider.css' rel='stylesheet' />

	<!-- wNumb library (for nouislider functionality) -->
	<script type='text/javascript' src="js/wNumb.js"></script>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/simple-sidebar.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    

</head>

<body>

    <div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="index.html">
                        Portland Housing Affordability
                    </a>
                
                </li>
            
            <div class="dropdown">
  				<button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" >
    			Maps
    			<span class="caret"></span>
  				</button>
  				<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
					<li> <a id='afford-button' href="affordability.html">Home Ownership Affordability</a></li>
					<li><a id='vIndex-button' href="vulnerability.html">Displacement Vulnerability</a></li>
					<li><a id='ownership-button' href="ownership.html">Tenure</a></li>					
				</ul>
			</div>

    		
    		<p id='info-text'>
    		Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam tincidunt, ipsum et posuere posuere, metus quam blandit sapien, ac condimentum nunc felis feugiat arcu. Pellentesque feugiat dolor diam, eget pulvinar metus luctus a. Nam blandit dolor ligula, vel ultricies lorem pharetra in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus vitae feugiat nunc. Sed blandit lectus non ex interdum, non elementum nunc sagittis. Morbi dignissim quam ac ligula finibus, ac ornare nisi feugiat. Pellentesque luctus tellus hendrerit elit varius vulputate. Vestibulum blandit est in sapien tristique congue. Suspendisse sit amet tellus vel urna maximus aliquam nec tempus leo. Quisque luctus sed ex nec tempor.
			</p>
			<img id="affordLegend" src="images/legend_affordability.png" alt="affordability legend" ></img>
			<button class="btn btn-default" id="take-action" type="button"  aria-haspopup="true" aria-expanded="true" href="http://portlandhousingcenter.org/" target="_blank" >
    			TAKE ACTION
  			</button>
  			<div id="logo">
            <a href="http://portlandhousingcenter.org/" target="_blank"><img  id="phc-logo" src="images/PHC_logo.png"  alt="link to portland housing center website" ></img></a>
        	<a href="http://econw.com/" target="_blank"><img  id="eco-logo" src="images/ECO_logo.png" href="http://econw.com/" alt="link to econorthwest website" ></img></a>

        	</div>
    		</ul>

        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <div id='map'></div>

						<div class= "btn-group" id="vcr-controls">

							<button type="button" id="vcr-play" class="btn btn-default btn-sm" aria-label="Play button">
								<span class="glyphicon glyphicon-play" aria-hidden="true"></span>
							</button>
		
							<button type="button" id="vcr-pause" class="btn btn-default btn-sm" aria-label="Pause button">
								<span class="glyphicon glyphicon-pause" aria-hidden="true"></span>
							</button>
	
							<button type="button" id="vcr-refresh" class="btn btn-default btn-sm" aria-label="Refresh map button">
								<span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
							</button>

						</div>

						<div id="slider"></div>
						<div id="year-label" class="leaflet-top leaflet-right">1990</div>
                        <a href="#menu-toggle" class="btn btn-default" id="menu-toggle"><span class="glyphicon glyphicon-option-vertical" aria-hidden="true"></span></a>
                    	
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>



</body>
<!-- vulnerability index map series -->
<script type='text/javascript' src='data/SFaffordHex.geojson'></script>
<script type='text/javascript' src='js/main.js'></script>



<script type='text/javascript'>
   	//menutoggle
     $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    //load global variables
    var map,
	activeLayers,
	skipSlider,
	playButton,
	pauseButton,
	refreshButton,
	skipValues,
	timestamp,
	layer,
	play,
	updateTimestamp;
	
	//load mapbox access
	L.mapbox.accessToken = 'pk.eyJ1IjoiZWNvbnciLCJhIjoiWUZxcXRMVSJ9.tmmSP9rEmDmhB54B8ARtQQ';
	var southWest = L.latLng(44.5, -124.5),
    	northEast = L.latLng(46.5, -120.9),
    	bounds = L.latLngBounds(southWest, northEast);
    
	map = L.mapbox.map('map', '',{
		maxBounds: bounds,
		maxZoom: 13,
		minZoom: 9

	}).setView([45.508, -122.707], 10);


	var uiControl = L.Control.extend({
	initialize: function (foo, options) {
		L.Util.setOptions(this, options);
	element = foo.replace('#','');
	},
	onAdd: function (map) {
		return L.DomUtil.get(element);
	}
	});


	map.addControl(new uiControl('#vcr-controls', { position: 'topright' }));
	map.addControl(new uiControl('#slider', { position: 'topright' }));
	map.addControl(new uiControl('#year-label', { position: 'topright' }));
	map.addControl(new uiControl('#menu-toggle', { position: 'topleft' }));


	var topBasemap = map._createPane('leaflet-top-pane', map.getPanes().mapPane);
    var labels = L.mapbox.tileLayer('econw.0iw1bc23').addTo(map);
    topBasemap.appendChild(labels.getContainer());
    labels.setZIndex(7);
    


	activeLayers = L.layerGroup().addTo(map);
	
	loadAffordability();

</script>



</html>
